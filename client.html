

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Client &mdash; Brightness Monitor Doc 1.0.0. Dokumentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Stichwortverzeichnis"
              href="genindex.html"/>
        <link rel="search" title="Suche" href="search.html"/>
    <link rel="top" title="Brightness Monitor Doc 1.0.0. Dokumentation" href="index.html"/>
        <link rel="next" title="Website" href="website.html"/>
        <link rel="prev" title="Einleitung" href="einleitung.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Brightness Monitor Doc
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0.
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="einleitung.html">Einleitung</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Client</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#software">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#grundkonzept">Grundkonzept</a></li>
<li class="toctree-l3"><a class="reference internal" href="#helligkeitsmessung">Helligkeitsmessung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#versenden-der-daten">Versenden der Daten</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#probleme">Probleme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#verwendete-hardware">Verwendete Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#helligkeitsverlauf-uber-den-tag">Helligkeitsverlauf über den Tag</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sensoabfrage">Sensoabfrage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#aufbau">Aufbau</a></li>
<li class="toctree-l3"><a class="reference internal" href="#erlauterung">Erläuterung</a></li>
<li class="toctree-l3"><a class="reference internal" href="#funktionsweise">Funktionsweise</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="website.html">Website</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auswertung.html">Projekt Auswertung</a></li>
<li class="toctree-l1"><a class="reference internal" href="literaturverzeichnis.html">Literaturverzeichnis</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Brightness Monitor Doc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Client</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/client.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="client">
<h1>Client<a class="headerlink" href="#client" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="software">
<h2>Software<a class="headerlink" href="#software" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="grundkonzept">
<h3>Grundkonzept<a class="headerlink" href="#grundkonzept" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Hauptaufgabe der Client-Software ist es, die Messwerte, wie in <a class="reference internal" href="#clienterlauterung"><span class="std std-ref">Erläuterung</span></a> beschrieben, zu sammeln und
anschließend an den Server zu verschicken.</p>
</div>
<div class="section" id="helligkeitsmessung">
<h3>Helligkeitsmessung<a class="headerlink" href="#helligkeitsmessung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Helligkeit wird gemessen und anschließend in einer lokalen Datenbank hinterlegt. Dieser Vorgang erfolgt alle 5
Sekunden. Da der Server den Durchschnitt eines Tages berechnet, würden Messdaten, die vor dem Sonnenaufgang bzw. nach
dem Sonnenuntergang erhoben wurden, das Ergebnis verfälschen. Um diese Problematik zu lösen werden Messwerte verwendet,
die vom Sonnenaufgang bis zum Sonnenuntergang erhoben wurden. Um diesen Zeitraum zu ermitteln haben wir eine Formel
<a class="reference internal" href="literaturverzeichnis.html#michelsunriseandsunset" id="id1">[2]</a> verwendet, die anhand des Höhen- und Breitengrades, den Sonnenaufgang und den Sonnenuntergang
eines Tages berechnen kann. Diese Berechnung erfolgt alle 5 Minuten in einem eigenen Thread um die CPU-Auslastung zu
senken.</p>
</div>
<div class="section" id="versenden-der-daten">
<h3>Versenden der Daten<a class="headerlink" href="#versenden-der-daten" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Datenbank wird im 5 Minuten Intervall ausgelesen und die Daten werden an den Server übermittelt. Anschließend
werden alle Einträge der Datenbank gelöscht. Dieser Vorgang erfolgt jedoch nur dann, wenn auch eine aktive Verbindung
mit dem von uns verwendeten Server über das Internet vorhanden ist. Sollte dies nicht der Fall sein, überspringt die
Software den Vorgang und wartet 5 Minuten bis zum nächsten Versuch.</p>
</div>
</div>
<div class="section" id="probleme">
<h2>Probleme<a class="headerlink" href="#probleme" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="verwendete-hardware">
<h3>Verwendete Hardware<a class="headerlink" href="#verwendete-hardware" title="Link zu dieser Überschrift">¶</a></h3>
<p>Mit einem Kondensator der mehr Kapazität besitzt, würden die Messergebnisse bei starker Helligkeit (in dem von uns
beobachteten Zeitraum von 11:00 bis 14:00 an sonnigen Tagen) genauer werden, da eine längere Zeit von Nöten wäre um
ihn aufzuladen. Über den oben beschriebenen Zeitraum hatten wir Messwerte von „0“ was „sehr hell“ entspricht. Auf
Grund dessen sind unsere Statistiken teils nicht aussagekräftig.</p>
<p>Auch orientieren sich unsere Messwerte an keiner physikalischen Größe, sodass man diese nicht für andere Zwecke
weiterverwenden könnte. Es gibt jedoch Module, die genauere Messwerte liefern bzw. die Helligkeit in Lux ausgeben
können.</p>
<div class="figure align-center" id="id6">
<span id="hardware"></span><a class="reference internal image-reference" href="_images/raspberry-pi_03.jpg"><img alt="Software Design" src="_images/raspberry-pi_03.jpg" style="width: 144.0px; height: 108.0px;" /></a>
<p class="caption"><span class="caption-text">Raspberry Pi mit Sensor</span></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/hardware_01.jpg"><img alt="Software Design" src="_images/hardware_01.jpg" style="width: 144.0px; height: 108.0px;" /></a>
<p class="caption"><span class="caption-text">Raspberry Pi mit Sensor</span></p>
</div>
</div>
<div class="section" id="helligkeitsverlauf-uber-den-tag">
<h3>Helligkeitsverlauf über den Tag<a class="headerlink" href="#helligkeitsverlauf-uber-den-tag" title="Link zu dieser Überschrift">¶</a></h3>
<p>Das nächste Problem stellt der Helligkeitsverlauf über einen Tag dar: umso rechtwinkliger die Sonne zum Standort,
desto intensiver wird das Licht. Daraus würden fehlerhafte Messdaten hervorgehen, denn z.B. eine Wolke die mittags
die Sonne verdeckt könnte äquivalent zu Sonnenschein nach dem Sonnenaufgang sein. Es muss also eine Justierung der
Messdaten stattfinden. Wir haben eine Formel <a class="reference internal" href="literaturverzeichnis.html#forumformelglobalstrahlung" id="id2">[3]</a> gefunden, die die absolute Helligkeit unter Angabe des
Standpunktes, des Datums sowie der Zeit, ausgibt. Die Maßeinheit ist Solarimeter (W/m2), welche man zu Lux umrechnen
kann. Die Justierung der Messdaten wurde mangels Zeit nicht implementiert. Unter Verwendung genauerer Messgeräte und
mit Hilfe dieser Formel ließe sich die Problematik lösen.</p>
</div>
</div>
<div class="section" id="sensoabfrage">
<h2>Sensoabfrage<a class="headerlink" href="#sensoabfrage" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="aufbau">
<h3>Aufbau<a class="headerlink" href="#aufbau" title="Link zu dieser Überschrift">¶</a></h3>
<p>Um die derzeitige Helligkeit zu erfassen wurde in unserem Versuchsaufbau ein Fotowiderstand GL5528 LDR, ein Kondensator
mit der Kapazität von einem Mikrofarad und 50 Volt Maximalspannung benutzt. Die negative Seite des Kondensators ist mit
der Masse des Raspberry Pi’s (im folgendem schwarzes Kabel) verbunden, die positive Seite ist mit einer Seite des
Fotowiderstands verbunden sowie an einen „GPIO“-Pin des Raspberry Pi’s (im folgendem blaues Kabel). Die andere Seite
des Fotowiderstands ist mit einem „GPIO’-Pin verbunden an dem eine 3,3 Volt Spannung anliegt (im folgendem rotes Kabel).
<a class="reference internal" href="literaturverzeichnis.html#raspberrypildr" id="id3">[4]</a></p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/Versuchsaufbau_Steckplatine.jpg"><img alt="Raspberry Pi Versuchsaufbau mir Steckplatine und LDR Fototwiderstand" src="_images/Versuchsaufbau_Steckplatine.jpg" style="width: 112.8px; height: 136.5px;" /></a>
<p class="caption"><span class="caption-text">Raspberry Pi Versuchsaufbau mir Steckplatine und LDR Fototwiderstand <a class="reference internal" href="literaturverzeichnis.html#raspberrypildr" id="id4">[4]</a></span></p>
</div>
</div>
<div class="section" id="erlauterung">
<span id="clienterlauterung"></span><h3>Erläuterung<a class="headerlink" href="#erlauterung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Der Widerstand des Fotowiderstandes ist lichtabhängig und verändert sich bei unterschiedlicher Helligkeit. In einem
hellen Zustand ist der Widerstand größer (bei 10 Lux 8 ~ 20 K). In einem dunklen Zustand ist der Widerstand sehr gering
(bei 0 Lux 1 M Minimum).</p>
<p>Ein Kondensator im Gleichstromkreis lädt sich auf, bis seine Kapazität erreicht ist. Ist der Kondensator geladen
fließt kein Strom.</p>
</div>
<div class="section" id="funktionsweise">
<h3>Funktionsweise<a class="headerlink" href="#funktionsweise" title="Link zu dieser Überschrift">¶</a></h3>
<p>Es läuft nun ein Strom durch den Fotowiderstand in den Kondensator, dieser lädt sich ungefähr bis zu ¾ seiner Kapazität
auf. Während dieses Vorgangs liegt kein Strom an blau an. In diesem Zeitraum wird ein Wert hochgezählt der später als
Ausgabe der Funktion gilt. Ist der Kondensator nun zu ¾ geladen, wird der Widerstand größer und der Strom beginnt über
das blaue Kabel zu fließen. Dies bemerkt der Raspberry Pi sofort und bricht den Vorgang ab. Der gezählte Wert wird in
unserem Fall in eine Datenbank zusammen mit der aktuellen Zeit abgelegt und wird später in den nächsten Ablaufschritt
übergeben.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Code-Ausschnitt Messwerterfassung <a class="reference internal" href="literaturverzeichnis.html#raspberrypildr" id="id5">[4]</a></span><a class="headerlink" href="#id9" title="Link zu diesem Quellcode">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="hll"><span class="n">timing</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="n">GPIOPIN</span> <span class="o">=</span> <span class="mi">11</span>
<span class="hll"><span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>
</span>
<span class="k">def</span> <span class="nf">RCtime</span> <span class="p">(</span><span class="n">RCpin</span><span class="p">):</span>
    <span class="n">reading</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">RCpin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">RCpin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">RCpin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">RCpin</span><span class="p">)</span> <span class="o">==</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">):</span>
        <span class="n">reading</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">reading</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="website.html" class="btn btn-neutral float-right" title="Website" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="einleitung.html" class="btn btn-neutral" title="Einleitung" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, s0556350 Samuel Erb &amp; s0556166 Steffen Exler.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0.',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>