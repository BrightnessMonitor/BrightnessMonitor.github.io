

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Website &mdash; Brightness Monitor Doc 1.0.0. Dokumentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Stichwortverzeichnis"
              href="genindex.html"/>
        <link rel="search" title="Suche" href="search.html"/>
    <link rel="top" title="Brightness Monitor Doc 1.0.0. Dokumentation" href="index.html"/>
        <link rel="next" title="Daten Auswertung" href="auswertung.html"/>
        <link rel="prev" title="Client" href="client.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Brightness Monitor Doc
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0.
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="einleitung.html">Einleitung</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Website</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#aufgabe-des-servers">Aufgabe des Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#verwendete-software-hoster">Verwendete Software &amp; Hoster</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bestandteile-der-server-software">Bestandteile der Server Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#models-datenbank">Models - Datenbank</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-schnittstelle">API - Schnittstelle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#view-ausgabe">View - Ausgabe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#probleme">Probleme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zu-kleine-datenbank">Zu kleine Datenbank</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schnittstelle-absichern-vor-dritten">Schnittstelle Absichern vor dritten</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auswertung.html">Daten Auswertung</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="literaturverzeichnis.html">Literaturverzeichnis</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Brightness Monitor Doc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Website</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/website.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="website">
<h1>Website<a class="headerlink" href="#website" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="aufgabe-des-servers">
<h2>Aufgabe des Servers<a class="headerlink" href="#aufgabe-des-servers" title="Link zu dieser Überschrift">¶</a></h2>
<p>Das Ziel des Server war es eine Zentrale Instanz zu erstellen, wo alle Daten gesammelt und Zentral ausgewertet werden
können. Auch war es wichtig möglichst kosten effektiv zu arbeiten und Resourcen schonend zu designen.</p>
</div>
<div class="section" id="verwendete-software-hoster">
<h2>Verwendete Software &amp; Hoster<a class="headerlink" href="#verwendete-software-hoster" title="Link zu dieser Überschrift">¶</a></h2>
<p>Als Software wurde das Python Framework <a class="reference external" href="https://www.djangoproject.com/">Django</a> eingesetzt mit dem <a class="reference external" href="http://www.django-rest-framework.org/">Django REST Framework</a> <a class="reference internal" href="literaturverzeichnis.html#djangorestapidoc" id="id1">[2]</a>
um eine Api Schnittstelle zu erzeugen. Die auswahl des Hoster fiel auf <a class="reference external" href="https://heroku.com/">heroku.com</a>, da Heroku für Entwickler eine
Gratis Instanz für Python Websites anbietet welche sich nach 30 Minuten inaktivität automatisch herunter fährt und
eine <a class="reference external" href="https://www.postgresql.org/">PostgreSQL</a> Datenbank mit 10.000 Zeilen enthält. Der Quellcode ist auf <a class="reference external" href="https://github.com/">github.com</a> gehostet und mit einem
<a href="#id11"><span class="problematic" id="id12">`_Webhook`_</span></a> <a class="reference internal" href="literaturverzeichnis.html#herokuwebhook" id="id2">[3]</a> verbunden, dadurch wird mit jedem Git push auf dem <a class="reference external" href="https://github.com/BrightnessMonitor/BrightnessMonitorWeb">Master Branch</a> der aktuelle
Quellcode auf der Heroku Instanz gesendet.</p>
</div>
<div class="section" id="bestandteile-der-server-software">
<h2>Bestandteile der Server Software<a class="headerlink" href="#bestandteile-der-server-software" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="models-datenbank">
<h3>Models - Datenbank<a class="headerlink" href="#models-datenbank" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Datenbank besteht aus 3 großen Komponenten, dem User, Device (Raspberry Pi) und den täglichen Werten.</p>
<div class="figure align-center" id="id10">
<img alt="Datenbank Model" src="_images/Models.png" />
<p class="caption"><span class="caption-text">Datenbank Model</span></p>
</div>
</div>
<div class="section" id="api-schnittstelle">
<h3>API - Schnittstelle<a class="headerlink" href="#api-schnittstelle" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Schnittstelle gibt bei einer leeren anfrage Value anfrage die latitude und longitude Koordinaten des gesicherten
Device aus und wenn ein Wert mit gegeben wird, wird in der Datenbank überprüft ob der User mit dem gesendeten Auth Token
das Device mit der gesendeten UUID gehört, wenn ja wird der gesendete Wert mit dem gesendeten Datum in der Datenbank
gesichert.</p>
</div>
<div class="section" id="view-ausgabe">
<h3>View - Ausgabe<a class="headerlink" href="#view-ausgabe" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Ausgabe umfasst 2 Seiten, die Landingpage gibt auf einer <a class="reference external" href="http://www.openstreetmap.org/">Open Street Map</a> <a class="reference internal" href="literaturverzeichnis.html#leaflet" id="id3">[13]</a> grafisch wieder, wo sich die Geräte befinden,
die Karte wird automatisch zentriert damit alle Geräte sichtbar sind.
Auf der zweiten Seite unter <code class="docutils literal"><span class="pre">/stats</span></code> befinden sich Bar Charts <a class="reference internal" href="literaturverzeichnis.html#googlebarchart" id="id4">[4]</a> welche alle Geräte den täglichen durchschnitts Wert ausgibt.</p>
</div>
<div class="section" id="deployment">
<h3>Deployment<a class="headerlink" href="#deployment" title="Link zu dieser Überschrift">¶</a></h3>
<p>Um ein möglichst einfaches und stabiles deployment zu ermöglichen, wurde das Heroku Django Template <a class="reference internal" href="literaturverzeichnis.html#herokudjangotemplate" id="id5">[5]</a>
als Grundgerüst verwendet und mit hilfe der Dokumentation von Heroku <a class="reference internal" href="literaturverzeichnis.html#herokudeployingdjango" id="id6">[6]</a>. In Kombination
mit einem Github Webhook <a class="reference internal" href="literaturverzeichnis.html#herokuwebhook" id="id7">[3]</a> ist das Deployment ausgeführt, sobald der <a class="reference external" href="https://github.com/BrightnessMonitor/BrightnessMonitorWeb">Master Branch</a> ein git push
empfängt.</p>
<p>Außerdem wurde in der Repo Readme ein <img alt="Heroku_Deployment" src="_images/Heroku_deployment.png" /> <a class="reference internal" href="literaturverzeichnis.html#deploytoheroku" id="id8">[7]</a> Button eingesetzt. Um auch dritten
die Möglichkeit zu geben, schnell und leicht diese Software auf ihrer Privaten Heroku Instanz einsetzen zu können.</p>
</div>
</div>
<div class="section" id="probleme">
<h2>Probleme<a class="headerlink" href="#probleme" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="zu-kleine-datenbank">
<h3>Zu kleine Datenbank<a class="headerlink" href="#zu-kleine-datenbank" title="Link zu dieser Überschrift">¶</a></h3>
<p>Da dei Gratis Instanz von Heroku nur eine 10.000 Zeilen <a class="reference external" href="https://www.postgresql.org/">PostgreSQL</a> Datenbank erlaubt war die Datenbank innerhalb
der ersten Tagen zu 100% voll und das Design musste Resourcen sparender geändert werden. Dadurch wurden mit jedem Datenupload
die Werte zusammengefasst zu einen Tages durchschnitts Wert</p>
</div>
<div class="section" id="schnittstelle-absichern-vor-dritten">
<h3>Schnittstelle Absichern vor dritten<a class="headerlink" href="#schnittstelle-absichern-vor-dritten" title="Link zu dieser Überschrift">¶</a></h3>
<p>Das Ziel war das nur die Personen Daten hochladen dürfen, die den richtigen Auth Token + Device UUID senden. Dadurch aber
das der Auth Token vom <a class="reference external" href="http://www.django-rest-framework.org/">Django REST Framework</a> integriert worden war, war es nur mit hilfe vom ausführlichen lesen der
Dokumentation <a class="reference internal" href="literaturverzeichnis.html#djangorestapidoc" id="id9">[2]</a> möglich heraus zu finden, welcher User sich hinter welchen Request sich verbirgt.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="auswertung.html" class="btn btn-neutral float-right" title="Daten Auswertung" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="client.html" class="btn btn-neutral" title="Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Samuel Erb &amp; Steffen Exler.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0.',
            LANGUAGE:'de',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>